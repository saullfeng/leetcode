#### [643. 子数组最大平均数 I](https://leetcode-cn.com/problems/maximum-average-subarray-i/)

难度简单192收藏分享切换为英文接收动态反馈

给定 `n` 个整数，找出平均数最大且长度为 `k` 的连续子数组，并输出该最大平均数。

 

**示例：**

```
输入：[1,12,-5,-6,50,3], k = 4
输出：12.75
解释：最大平均数 (12-5-6+50)/4 = 51/4 = 12.75
```

 

**提示：**

- 1 <= `k` <= `n` <= 30,000。
- 所给数据范围 [-10,000，10,000]。

以下代码，可以作为滑动窗口模板使用：

1. 初始化将滑动窗口压满，取得第一个滑动窗口的目标值
2. 继续滑动窗口，每往前滑动一次，需要删除一个和添加一个元素(k的值不变)

### 滑动窗口

![image-20210827163416186](C:\Users\solfeng\AppData\Roaming\Typora\typora-user-images\image-20210827163416186.png)

![image-20210827163430156](C:\Users\solfeng\AppData\Roaming\Typora\typora-user-images\image-20210827163430156.png)

![img](https://assets.leetcode-cn.com/solution-static/643/4.png)

```go
func findMaxAverage(nums []int, k int) float64 {
    sum :=0
    //初始化窗口
   for _, v := range nums[:k] {
        sum +=v
    }
    maxSum :=sum
    for i :=k;i<len(nums);i++{
        sum=sum-nums[i-k]+nums[i]
        maxSum =max(maxSum,sum)
    }
    return float64(maxSum) / float64(k)
}
func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

- 时间复杂度：每个元素最多滑入和滑出窗口一次。复杂度为 O(n)
- 空间复杂度：O(1)

```go
func findMaxAverage(nums []int, k int) float64 {
    sum := 0
    nlen := len(nums)
    for _,v :=range nums[:k]{
        sum += v
    }

    max := sum 
    for i:=k;i<nlen;i++{
        max += nums[i] - nums[i-k]
        if max > sum {
            sum = max
        }
    }

    return float64(sum)/float64(k)
}
```

