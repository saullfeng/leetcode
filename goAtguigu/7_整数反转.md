#### [7. 整数反转](https://leetcode-cn.com/problems/reverse-integer/)

难度简单2970收藏分享切换为英文接收动态反馈

给你一个 32 位的有符号整数 `x` ，返回将 `x` 中的数字部分反转后的结果。

如果反转后整数超过 32 位的有符号整数的范围 `[−231, 231 − 1]` ，就返回 0。

**假设环境不允许存储 64 位整数（有符号或无符号）。**

 

**示例 1：**

```
输入：x = 123
输出：321
```

**示例 2：**

```
输入：x = -123
输出：-321
```

**示例 3：**

```
输入：x = 120
输出：21
```

**示例 4：**

```
输入：x = 0
输出：0
```

将`12345 % 10 `得到`5`，之后将`12345 / 10`

2、将1234 % 10 得到4，再将1234 / 10
3、将123 % 10 得到3，再将123 / 10
4、将12 % 10 得到2，再将12 / 10
5、将1 % 10 得到1，再将1 / 10

这么看起来，一个循环就搞定了，循环的判断条件是x>0
但这样不对，因为忽略了 负数
循环的判断条件应该是while(x!=0)，无论正数还是负数，按照上面不断的/10这样的操作，最后都会变成0，所以判断终止条件就是!=0
有了取模和除法操作，对于像12300这样的数字，也可以完美的解决掉了。

看起来这道题就这么解决了，但请注意，题目上还有这么一句

假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 `[−2^31, 2^31 − 1]`。

也就是说我们不能用**long**存储最终结果，而且有些数字可能是合法范围内的数字，但是反转过来就超过范围了。
假设有1147483649这个数字，它是小于最大的32位整数2147483647的，但是将这个数字反转过来后就变成了9463847411，这就比最大的32位整数还要大了，这样的数字是没法存到int里面的，所以肯定要返回0(溢出了)。









###完美 数学

从上述解法来看，我们在循环的 `ans = ans * 10 + x % 10` 这一步会有溢出的风险，因此我们需要边遍历边判断是否溢出：

对于正数而言：溢出意味着 ans * 10 + x % 10 > Integer.MAX_VALUE，对等式进行变化后可得 ans > (Integer.MAX_VALUE - x % 10) / 10)。所以我们可以根据此变形公式进行预判断

对于负数而言：溢出意味着 ans * 10 + x % 10 < Integer.MIN_VALUE，对等式进行变化后可得 ans < (Integer.MIN_VALUE - x % 10) / 10)。所以我们可以根据此变形公式进行预判断

```go
func reverse(x int) (rev int) {
    for x !=0{
        if rev < math.MinInt32/10 || rev >math.MaxInt32/10{
            return 0
        }
        digit := x%10
        x/=10
        rev = rev*10+digit
    }
    return
}
```

时间复杂度：数字 xx 的位数，数字大约有log10x 位。复杂度为O(log10x)

空间复杂度：O(1)

Integer.MAX_VALUE表示int数据类型的最大取值数：2 147 483 647
Integer.MIN_VALUE表示int数据类型的最小取值数：-2 147 483 648

对应：

* Short.MAX_VALUE 为short类型的最大取值数 32 767
  Short.MIN_VALUE 为short类型的最小取值数 -32 768

其他数据类型同上含义

补充：
**Integer.MAX_VALUE+1=Integer.MIN_VALUE**

因为：
Integer.MAX_VALUE的二进制是0111 1111 1111 1111 1111 1111 1111 1111
Integer.MIN_VALUE的二进制是 1000 0000 0000 0000 0000 0000 0000 0000

0111 1111 1111 1111 1111 1111 1111 1111+1=1000 0000 0000 0000 0000 0000 0000 0000


![在这里插入图片描述](https://img-blog.csdnimg.cn/2020031010134471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgyNDUwMA==,size_16,color_FFFFFF,t_70)